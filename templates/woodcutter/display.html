{% extends 'woodcutter/base.html' %}
{% load static %}

{% block header %}
    <title> {{ titlestring}} </title>
    <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/JSXTransformer.js"></script>
    <style>
        @font-face {
        font-family: Bahnschrift;
        src: url("{% static 'woodcutter/fonts/bahnschrift.ttf' %}");
        }
    </style>
    <link rel="stylesheet" type="text/css" href="{% static 'woodcutter/display.css' %}">
    <script>
        var logIndex = {{ logIndex }};
        var titlestring = "{{ titlestring }}";
        var players = {{ players | safe }};
        var staticRoot = "{% static 'woodcutter' %}";
        var kingdom = '{{ kingdom }}'.split('~').map(x => (x ? x.split('|') : []));
        var boards = "{{ boards | safe }}".split('~');
        var pairRaws = '{{ pairs }}'.split('~').map(x => x.split('|').map(y => parseInt(y)));
        var pairs = pairRaws.reduce(function(obj, x){
            obj[x[0]] = x.slice(1);
            return obj
        }, {});
        var scoreTotals = '{{ scoreTotals }}'.split('~').map(x => x.split('|').map(y => parseInt(y)));
        var borders = {{ borders | safe }}; var interiors = {{ interiors | safe }}; var urls = {{ urls | safe }};
        var stepPoints = {{ stepPoints | safe }}; var turnPoints = {{ turnPoints | safe }};
        var turnOwners = {{ turnOwners }};
        var phases = '{{ phases }}';
        var turnDecks = '{{ turnDecks | safe }}';
        var story = "{{ story | safe }}"; </script>
{% endblock %}
{% block content %}
    <div class='content'>
    </div>
    <script type='text/jsx' src="{% static 'woodcutter/display.js' %}"></script>
{% endblock %}